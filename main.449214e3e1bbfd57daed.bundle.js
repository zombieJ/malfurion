(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="# rc-footer üêæ\n\n[![NPM version][npm-image]][npm-url]\n[![build status][travis-image]][travis-url]\n[![Codecov][codecov-image]][codecov-url]\n[![david deps][david-image]][david-url]\n[![david devDeps][david-dev-image]][david-dev-url]\n[![npm download][download-image]][download-url]\n\n[npm-image]: http://img.shields.io/npm/v/rc-footer.svg?style=flat-square\n[npm-url]: http://npmjs.org/package/rc-footer\n[travis-image]: https://img.shields.io/travis/com/react-component/footer.svg?style=flat-square\n[travis-url]: https://travis-ci.com/react-component/footer\n[codecov-image]: https://img.shields.io/codecov/c/github/react-component/footer/master.svg?style=flat-square\n[codecov-url]: https://codecov.io/gh/react-component/footer/branch/master\n[david-image]: https://david-dm.org/react-component/footer/status.svg?style=flat-square\n[david-dev-url]: https://david-dm.org/react-component/footer?type=dev\n[david-dev-image]: https://david-dm.org/react-component/footer/dev-status.svg?style=flat-square\n[david-url]: https://david-dm.org/react-component/footer\n[download-image]: https://img.shields.io/npm/dm/rc-footer.svg?style=flat-square\n[download-url]: https://npmjs.org/package/rc-footer\n\nPretty Footer react component used in [ant.design](https://ant.design) and [antv.vision](https://antv.vision).\n\n![](https://gw.alipayobjects.com/zos/antfincdn/z4ie3X8x6u/1cb23945-ec67-45a3-b521-f8da62e12255.png)\n\n## Live Demo\n\nhttps://react-component.github.io/footer/\n\n## Install\n\n[![rc-footer](https://nodei.co/npm/rc-footer.png)](https://npmjs.org/package/rc-footer)\n\n## Usage\n\n```js\nimport Footer from 'rc-footer';\nimport 'rc-footer/assets/index.css'; // import 'rc-footer/asssets/index.less';\nimport { render } from 'react-dom';\n\nrender(\n  <Footer\n    columns={[\n      {\n        icon: (\n          <img src=\"https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg\" />\n        ),\n        title: 'ËØ≠ÈõÄ',\n        url: 'https://yuque.com',\n        description: 'Áü•ËØÜÂàõ‰Ωú‰∏éÂàÜ‰∫´Â∑•ÂÖ∑',\n        openExternal: true,\n      },\n    ]}\n    bottom=\"Made with ‚ù§Ô∏è by AFX\"\n  />,\n  mountNode,\n);\n```\n\n## API\n\n| Property         | Type                              | Default        | Description                              |\n| ---------------- | --------------------------------- | -------------- | ---------------------------------------- |\n| prefixCls        | string                            | rc-footer      |                                          |\n| className        | string                            | ''             | additional class name of footer          |\n| style            | React.CSSProperties               |                | style properties of footer               |\n| columns          | [Column](#Column) Array           | []             | columns data inside footer               |\n| bottom           | ReactNode                         |                | extra bottom area beneath footer columns |\n| theme            | 'light' \\| 'dark'                 | 'dark'         | preset theme of footer                   |\n| backgroundColor  | string                            | '#000'         | background color of footer               |\n| columnLayout     | 'space-around' or 'space-between' | 'space-around' | justify-content value of columns element |\n| maxColumnsPerRow | number                            | -              | max count of columns for each row        |\n\n### Column\n\n| Property  | Type                       | Default | Description                     |\n| --------- | -------------------------- | ------- | ------------------------------- |\n| icon      | ReactNode                  |         | icon that before column title   |\n| title     | ReactNode                  |         | title of column                 |\n| items     | [Item](#Column-Item) Array | []      | items data inside each column   |\n| className | string                     | ''      | additional class name of footer |\n| style     | React.CSSProperties        |         | style properties of footer      |\n\n### Column Item\n\n| Property      | Type                | Default | Description                                             |\n| ------------- | ------------------- | ------- | ------------------------------------------------------- |\n| icon          | ReactNode           |         | icon that before column title                           |\n| title         | ReactNode           |         | title of column                                         |\n| description   | ReactNode           |         | description of column, come after title                 |\n| url           | string              |         | link url of item title                                  |\n| openExternal  | boolean             | false   | link target would be `_blank` if `openExternal` is ture |\n| className     | string              | ''      | additional class name of footer                         |\n| style         | React.CSSProperties |         | style properties of footer                              |\n| LinkComponent | React.ReactType     | 'a'     | the link element to render item                         |\n\n## Development\n\n```\nnpm install\nnpm start\n```\n\n## License\n\nrc-footer is released under the MIT license.\n"},312:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BoundingBox",{enumerable:!0,get:function get(){return _interface.BoundingBox}}),Object.defineProperty(exports,"Matrix",{enumerable:!0,get:function get(){return _matrix.default}}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function get(){return _mathUtil.Line}}),exports.default=exports.MALFURION_INSTANCE=void 0;var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(782)),_objectSpread2=_interopRequireDefault(__webpack_require__(199)),_slicedToArray2=_interopRequireDefault(__webpack_require__(103)),_toConsumableArray2=_interopRequireDefault(__webpack_require__(313)),_classCallCheck2=_interopRequireDefault(__webpack_require__(104)),_svgUtil=__webpack_require__(314),_interface=__webpack_require__(788),_matrix=_interopRequireDefault(__webpack_require__(315)),_mathUtil=__webpack_require__(317),_cacheUtil=__webpack_require__(789);exports.MALFURION_INSTANCE="__Malfurion_Instance__";var Malfurion=function Malfurion(source){var _this=this;(0,_classCallCheck2.default)(this,Malfurion),this.debug=!1,this.entity=void 0,this.svg=null,this.debugHolder=null,this.pathCache=new _cacheUtil.PathCache,this.changedEntities=new Set,this.clickEventHandlers=new Set,this.mouseEnterEventHandlers=new Set,this.mouseLeaveEventHandlers=new Set,this.elementEnterEventHandlers=new Set,this.elementLeaveEventHandlers=new Set,this.addEventListener=function(event,callback){switch(event){case"click":_this.clickEventHandlers.add(callback);break;case"mouseEnter":_this.mouseEnterEventHandlers.add(callback);break;case"mouseLeave":_this.mouseLeaveEventHandlers.add(callback);break;case"elementEnter":_this.elementEnterEventHandlers.add(callback);break;case"elementLeave":_this.elementLeaveEventHandlers.add(callback);break;default:console.warn("Malfurion do not support '".concat(event,"' type."))}},this.generateDebugHolder=function(){if(_this.svg&&(_this.debugHolder&&_this.svg.removeChild(_this.debugHolder),_this.debug)){var debugHolder=document.createElementNS("http://www.w3.org/2000/svg","g");_this.pathCache.getPathList().forEach((function(path){var mergedTransform=_this.getMergedTransform(path),box=_this.getOriginBox(path),entity=_this.getNodeEntity(path);if(box&&entity){var _entity$originX=entity.originX,originX=void 0===_entity$originX?.5:_entity$originX,_entity$originY=entity.originY,originY=void 0===_entity$originY?.5:_entity$originY,center=document.createElementNS("http://www.w3.org/2000/svg","circle");center.style.pointerEvents="none",center.setAttribute("cx","".concat(box.x+box.width*originX)),center.setAttribute("cy","".concat(box.y+box.height*originY)),center.setAttribute("r","2"),center.setAttribute("fill","blue"),center.setAttribute("fill-opacity","0.5"),center.setAttribute("transform",mergedTransform),debugHolder.appendChild(center)}})),_this.debugHolder=debugHolder,_this.svg.appendChild(_this.debugHolder)}},this.getSVG=function(){if(!_this.svg){var idCacheList=Object.keys(_this.entity.ids).sort((function(id1,id2){return id2.length-id1.length})).map((function(id){return[id,_this.entity.ids[id]]}));_this.debug&&console.time("getSVG");var svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),defs=document.createElementNS("http://www.w3.org/2000/svg","defs");_this.svg=svg,svg.__Malfurion_Instance__=_this,svg.appendChild(defs);var fillNodes=function fillNodes(holder,nodes){var path=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];nodes.forEach((function(node,index){var entity=node,tagName=entity.tagName,attributes=entity.attributes,children=entity.children,ele=document.createElementNS("http://www.w3.org/2000/svg",tagName);entity.element=ele;var elePath=path?[].concat((0,_toConsumableArray2.default)(path),[index]):path;elePath&&(ele.setAttribute("data-path",elePath.join("-")),_this.pathCache.set(ele,elePath,entity)),Object.keys(attributes).forEach((function(key){var value=attributes[key];value.includes("#")&&idCacheList.forEach((function(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),id=_ref2[0],replaceId=_ref2[1];value=value.replace("#".concat(id),"#".concat(replaceId))})),key.includes("xlink:")?ele.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",value):ele.setAttribute(key,value)})),fillNodes(ele,children,elePath),holder.appendChild(ele)}))};fillNodes(defs,_this.entity.defs,!1),fillNodes(svg,_this.entity.nodes),_this.debug&&(_this.generateDebugHolder(),console.timeEnd("getSVG")),svg.addEventListener("click",(function(e){_this.clickEventHandlers.forEach((function(callback){return callback(e,_this)}))})),svg.addEventListener("mouseenter",(function(e){_this.mouseEnterEventHandlers.forEach((function(callback){return callback(e,_this)}))})),svg.addEventListener("mouseleave",(function(e){_this.mouseLeaveEventHandlers.forEach((function(callback){return callback(e,_this)}))})),svg.addEventListener("mouseover",(function(e){_this.elementEnterEventHandlers.forEach((function(callback){return callback(e,_this)}))})),svg.addEventListener("mouseout",(function(e){_this.elementLeaveEventHandlers.forEach((function(callback){return callback(e,_this)}))}))}return _this.svg},this.getHierarchy=function(){var idCache=new Map;Object.keys(_this.entity.ids).forEach((function(originId){idCache.set(_this.entity.ids[originId],originId)}));return function dig(nodes){var path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return nodes.map((function(_ref3,index){var tagName=_ref3.tagName,attributes=_ref3.attributes,_ref3$children=_ref3.children,children=void 0===_ref3$children?[]:_ref3$children,mergedPath=[].concat((0,_toConsumableArray2.default)(path),[index]),info={path:mergedPath,tagName:tagName},element=_this.pathCache.getElement(mergedPath);return element&&(info.element=element),attributes.id&&(info.id=attributes.id,info.originId=idCache.get(attributes.id)),children.length&&(info.children=dig(children,mergedPath)),info}))}(_this.entity.nodes)},this.getPath=function(element){return _this.pathCache.getPath(element)},this.getElement=function(path){return _this.pathCache.getElement(path)},this.getNodeEntity=function(path){if(!path||!path.length)return null;for(var nodes=_this.entity.nodes,i=0;i<path.length;i+=1){var current=nodes[0===i?0:path[i]];if(i===path.length-1)return current;nodes=current.children}return null},this.getOriginBox=function(path){var entity=_this.getNodeEntity(path);return entity?entity.box:null},this.getBox=function(path){var entity=_this.getNodeEntity(path);if(entity){var mergedTransform=_this.getMergedTransform(path),pureMergedTransform=_this.getMergedTransform(path,!0);return(0,_objectSpread2.default)({x:0,y:0,width:0,height:0},_this.getOriginBox(path),{originX:void 0!==entity.originX?entity.originX:.5,originY:void 0!==entity.originY?entity.originY:.5,translateX:entity.translateX||0,translateY:entity.translateY||0,rotate:entity.rotate||0,opacity:entity.opacity||1,scaleX:entity.scaleX||1,scaleY:entity.scaleY||1,mergedTransform:mergedTransform,pureMergedTransform:pureMergedTransform})}return null},this.getMergedTransform=function(path){for(var ignoreCurrentMalfurion=arguments.length>1&&void 0!==arguments[1]&&arguments[1],mergedTransform="",endNodeEntity=_this.getNodeEntity(path),entity=endNodeEntity;entity;){var _entity=entity,attributes=_entity.attributes,malfurionTransform="";ignoreCurrentMalfurion&&endNodeEntity===entity||(malfurionTransform=_this.getMatrix(_this.pathCache.getPath(entity)).toString()),mergedTransform="".concat(attributes.transform||""," ").concat(malfurionTransform," ").concat(mergedTransform).replace(/\s+/," ").trim(),entity=entity.parent}return mergedTransform},this.internalTransform=function(path,prop,initialValue,value,postUpdate){var entity=_this.getNodeEntity(path);if(entity&&void 0!==value){var target="function"==typeof value?value(entity[prop]||initialValue):value;entity[prop]=postUpdate?postUpdate(target):target,_this.refresh(path),_this.changedEntities.add(entity)}return _this.generateDebugHolder(),entity&&entity[prop]||initialValue},this.originX=function(path,value){return _this.internalTransform(path,"originX",.5,value)},this.originY=function(path,value){return _this.internalTransform(path,"originY",.5,value)},this.rotate=function(path,value){return _this.internalTransform(path,"rotate",0,value,(function(val){return(val%360+360)%360}))},this.scaleX=function(path,value){return _this.internalTransform(path,"scaleX",1,value)},this.scaleY=function(path,value){return _this.internalTransform(path,"scaleY",1,value)},this.translateX=function(path,value){return _this.internalTransform(path,"translateX",0,value)},this.translateY=function(path,value){return _this.internalTransform(path,"translateY",0,value)},this.opacity=function(path,value){return _this.internalTransform(path,"opacity",1,value)},this.getMatrix=function(path){var entity=_this.getNodeEntity(path);if(!entity)return _matrix.default.fromTranslate();var _ref4=_this.getOriginBox(path),x=_ref4.x,y=_ref4.y,width=_ref4.width,height=_ref4.height,_entity$rotate=entity.rotate,rotate=void 0===_entity$rotate?0:_entity$rotate,_entity$scaleX=entity.scaleX,scaleX=void 0===_entity$scaleX?1:_entity$scaleX,_entity$scaleY=entity.scaleY,scaleY=void 0===_entity$scaleY?1:_entity$scaleY,_entity$translateX=entity.translateX,translateX=void 0===_entity$translateX?0:_entity$translateX,_entity$translateY=entity.translateY,translateY=void 0===_entity$translateY?0:_entity$translateY,_entity$originX2=entity.originX,originX=void 0===_entity$originX2?.5:_entity$originX2,_entity$originY2=entity.originY,originY=void 0===_entity$originY2?.5:_entity$originY2;return _matrix.default.fromMixTransform({translateX:translateX,translateY:translateY,rotate:rotate,scaleX:scaleX,scaleY:scaleY,originX:originX,originY:originY,x:x,y:y,width:width,height:height})},this.reset=function(){_this.changedEntities.forEach((function(entity){var _entity$element;delete entity.opacity,delete entity.rotate,delete entity.originX,delete entity.originY,delete entity.scaleX,delete entity.scaleY,delete entity.translateX,delete entity.translateY,delete entity.opacity,null===(_entity$element=entity.element)||void 0===_entity$element||_entity$element.setAttribute("transform",entity.attributes.transform||"")})),_this.changedEntities=new Set},this.refresh=function(path){var entity=_this.getNodeEntity(path);if(entity){var ele=_this.getElement(path),attributes=entity.attributes,opacity=entity.opacity,matrix=_this.getMatrix(path);if(ele.setAttribute("transform","".concat(attributes.transform||""," ").concat(matrix.toString())),void 0!==opacity){var mergedOpacity=Number(attributes.opacity||1)*opacity;ele.setAttribute("opacity","".concat(mergedOpacity))}else attributes.opacity?ele.setAttribute("opacity",attributes.opacity):ele.removeAttribute("opacity")}},this.serializeTransform=function(){var list=[];return function dig(nodes){var parentPath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(nodes||[]).forEach((function(node,index){var children=node.children,path=[].concat((0,_toConsumableArray2.default)(parentPath),[index]),updated=!1,record={path:path};function recordIfNeeded(prop,defaultValue){var val=node[prop];void 0!==val&&val!==defaultValue&&(record[prop]=val,updated=!0)}recordIfNeeded("rotate",0),recordIfNeeded("originX",.5),recordIfNeeded("originY",.5),recordIfNeeded("scaleX",1),recordIfNeeded("scaleY",1),recordIfNeeded("translateX",0),recordIfNeeded("translateY",0),recordIfNeeded("opacity",1),updated&&list.push(record),dig(children,path)}))}(_this.entity.nodes),list},this.deserializeTransform=function(records){_this.reset(),records.forEach((function(_ref5){var path=_ref5.path,restProps=(0,_objectWithoutProperties2.default)(_ref5,["path"]),entity=_this.getNodeEntity(path);entity&&(Object.keys(restProps).forEach((function(prop){entity[prop]=restProps[prop]})),_this.refresh(path),_this.changedEntities.add(entity))}))};var _holder=document.createElement("div");_holder.innerHTML=source;var _svg=_holder.querySelector("svg");document.body.appendChild(_svg),this.entity=(0,_svgUtil.analysisSVG)(_svg.children,(0,_svgUtil.getBox)(_svg)),document.body.removeChild(_svg)};Malfurion.getInstance=function(svg){return svg.__Malfurion_Instance__},Malfurion.getElement=function(svg,path){var element=svg;return path.forEach((function(index){element&&(element=element.children[index])})),element};var _default=Malfurion;exports.default=_default},314:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAttributes=getAttributes,exports.getNodeRecord=getNodeRecord,exports.getBox=getBox,exports.analysisNodes=analysisNodes,exports.analysisSVG=function analysisSVG(list,rootRect){var entity={ids:{},defs:[],nodes:[]},rootNodes=analysisNodes(null,Array.from(list),entity);if(rootNodes.length>1){var rootNode={parent:null,tagName:"g",box:rootRect,attributes:{},children:rootNodes};rootNodes.forEach((function(node){node.parent=rootNode})),rootNodes=[rootNode]}return entity.nodes=rootNodes,entity},exports.parseTransformMatrix=function parseTransformMatrix(transform){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),g=document.createElementNS("http://www.w3.org/2000/svg","g");svg.appendChild(g),document.body.appendChild(svg),g.setAttribute("transform",transform);var matrix=g.getCTM();return document.body.removeChild(svg),matrix};var _objectSpread2=_interopRequireDefault(__webpack_require__(199)),_matrix=_interopRequireDefault(__webpack_require__(315));function getAttributes(_ref){var attributes=_ref.attributes,attrs={};return Array.from(attributes).forEach((function(_ref2){var name=_ref2.name,value=_ref2.value;attrs[name]=value})),attrs}function getNodeRecord(node,loopChildren,postRecord){var subRecords=[];loopChildren&&(subRecords=Array.from(node.children||[]).map((function(subNode){return getNodeRecord(subNode,!0)})));var record={tagName:node.tagName,attributes:getAttributes(node),children:subRecords};return postRecord&&postRecord(record),record}function getBox(ele){var pure=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_ele$getBBox=ele.getBBox(),x=_ele$getBBox.x,y=_ele$getBBox.y,width=_ele$getBBox.width,height=_ele$getBBox.height;if(pure)return{x:x,y:y,width:width,height:height};var _ref3=ele.getCTM(),a=_ref3.a,b=_ref3.b,c=_ref3.c,d=_ref3.d,e=_ref3.e,f=_ref3.f,matrix=_matrix.default.fromTransform(a,b,c,d,e,f),leftTop=matrix.transformPosition(x,y),rightTop=matrix.transformPosition(x+width,y),leftBottom=matrix.transformPosition(x,y+height),rightBottom=matrix.transformPosition(x+width,y+height),xs=[leftTop.x,rightTop.x,leftBottom.x,rightBottom.x],ys=[leftTop.y,rightTop.y,leftBottom.y,rightBottom.y],left=Math.min.apply(Math,xs),right=Math.max.apply(Math,xs),top=Math.min.apply(Math,ys),bottom=Math.max.apply(Math,ys);return{x:left,y:top,width:right-left,height:bottom-top}}var uuid=0;function analysisNodes(parent,nodes,entity){var isDefs=arguments.length>3&&void 0!==arguments[3]&&arguments[3],nodeEntities=[];function postRecord(record){if(record.attributes.id){var newId="MALFURION_".concat(uuid);entity.ids[record.attributes.id]=newId,record.attributes.id=newId,uuid+=1}}return nodes.forEach((function(node){var tagName=node.tagName,children=node.children;switch(tagName){case"title":case"desc":return;case"mask":return void entity.defs.push(getNodeRecord(node,!0,postRecord));case"defs":return void analysisNodes(null,Array.from(children),entity,!0);default:if(isDefs)entity.defs.push(getNodeRecord(node,!0,postRecord));else{var nodeEntity=(0,_objectSpread2.default)({},getNodeRecord(node,!1,postRecord),{parent:parent,box:getBox(node,!0),children:[]});nodeEntity.children=analysisNodes(nodeEntity,Array.from(children),entity),nodeEntities.push(nodeEntity)}}})),nodeEntities}},315:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(103)),_classCallCheck2=_interopRequireDefault(__webpack_require__(104)),_createClass2=_interopRequireDefault(__webpack_require__(316)),_mathjs=__webpack_require__(816),_svgUtil=__webpack_require__(314),_mathUtil=__webpack_require__(317),Matrix=function(){function Matrix(_x,_y,_values){var _this=this;(0,_classCallCheck2.default)(this,Matrix),this.matrix=void 0,this.fill=function(values){for(var i=0,targetX=_this.getX(),targetY=_this.getY(),y=0;y<targetY;y+=1)for(var x=0;x<targetX;x+=1)_this.set(x,y,values[i]||0),i+=1},this.set=function(x,y,value){_this.matrix[y][x]=value},this.get=function(x,y){return _this.matrix[y][x]},this.getX=function(){return _this.matrix[0].length},this.getY=function(){return _this.matrix.length},this.getMatrix=function(){return _this.matrix},this.multiple=function(instance){var rets=(0,_mathjs.multiply)(_this.getMatrix(),instance.getMatrix());return Matrix.fromArray(rets)},this.leftDivide=function(instance){return Matrix.fromArray((0,_mathjs.inv)(instance.getMatrix())).multiple(_this)},this.rightDivide=function(instance){return Matrix.fromArray((0,_mathjs.divide)(_this.getMatrix(),instance.getMatrix()))},this.transformPosition=function(x,y){var matrix=new Matrix(1,3,[x,y,1]),ret=_this.multiple(matrix);return{x:ret.get(0,0),y:ret.get(0,1)}},this.toTransform=function(){return[_this.get(0,0),_this.get(0,1),_this.get(1,0),_this.get(1,1),_this.get(2,0),_this.get(2,1)]},this.toString=function(){var transform=_this.toTransform();return"matrix(".concat(transform.join(","),")")},this.matrix=[];for(var i=0;i<_y;i+=1){this.matrix[i]=[];for(var j=0;j<_x;j+=1)this.matrix[i][j]=0}_values&&this.fill(_values)}return(0,_createClass2.default)(Matrix,null,[{key:"fromArray",value:function fromArray(matrixArr){var instance=new Matrix(1,1);return instance.matrix=matrixArr,instance}},{key:"fromTransform",value:function fromTransform(a,b,c,d,e,f){var instance=new Matrix(3,3);return instance.set(0,0,a),instance.set(0,1,b),instance.set(1,0,c),instance.set(1,1,d),instance.set(2,0,e),instance.set(2,1,f),instance.set(2,2,1),instance}},{key:"fromTranslate",value:function fromTranslate(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Matrix.fromTransform(1,0,0,1,x,y)}},{key:"fromTransformText",value:function fromTransformText(str){var matrix=(0,_svgUtil.parseTransformMatrix)(str);if(matrix){var a=matrix.a,b=matrix.b,c=matrix.c,d=matrix.d,e=matrix.e,f=matrix.f;return Matrix.fromTransform(a,b,c,d,e,f)}return Matrix.fromTranslate()}},{key:"backFromPosition",value:function backFromPosition(list){var _resolveTernary=(0,_mathUtil.resolveTernary)([[list[0].source.x,list[0].source.y,list[0].target.x],[list[1].source.x,list[1].source.y,list[1].target.x],[list[2].source.x,list[2].source.y,list[2].target.x]]),_resolveTernary2=(0,_slicedToArray2.default)(_resolveTernary,3),a=_resolveTernary2[0],c=_resolveTernary2[1],e=_resolveTernary2[2],_resolveTernary3=(0,_mathUtil.resolveTernary)([[list[0].source.x,list[0].source.y,list[0].target.y],[list[1].source.x,list[1].source.y,list[1].target.y],[list[2].source.x,list[2].source.y,list[2].target.y]]),_resolveTernary4=(0,_slicedToArray2.default)(_resolveTernary3,3),b=_resolveTernary4[0],d=_resolveTernary4[1],f=_resolveTernary4[2];return Matrix.fromTransform(a,b,c,d,e,f)}},{key:"fromRotate",value:function fromRotate(rotate,_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,originX=_ref.originX,originY=_ref.originY,deg=rotate/180*Math.PI,transX=x+width*originX,transY=y+height*originY,transToMatrix=Matrix.fromTranslate(transX,transY),transBackMatrix=Matrix.fromTranslate(-transX,-transY),rotateMatrix=Matrix.fromTransform(Math.cos(deg),Math.sin(deg),-Math.sin(deg),Math.cos(deg),0,0);return transToMatrix.multiple(rotateMatrix).multiple(transBackMatrix)}},{key:"fromScale",value:function fromScale(scaleX,scaleY,_ref2){var x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,transX=x+width*_ref2.originX,transY=y+height*_ref2.originY,transToMatrix=Matrix.fromTranslate(transX,transY),transBackMatrix=Matrix.fromTranslate(-transX,-transY),scaleMatrix=Matrix.fromTransform(scaleX,0,0,scaleY,0,0);return transToMatrix.multiple(scaleMatrix).multiple(transBackMatrix)}},{key:"fromMixTransform",value:function fromMixTransform(mixTransform){var translateX=mixTransform.translateX,translateY=mixTransform.translateY,rotate=mixTransform.rotate,scaleX=mixTransform.scaleX,scaleY=mixTransform.scaleY,mergeMatrix=Matrix.fromTranslate();if(translateX||translateY){var translateMatrix=Matrix.fromTranslate(translateX,translateY);mergeMatrix=mergeMatrix.multiple(translateMatrix)}return 0!==rotate&&(mergeMatrix=mergeMatrix.multiple(Matrix.fromRotate(rotate,mixTransform))),1===scaleX&&1===scaleY||(mergeMatrix=mergeMatrix.multiple(Matrix.fromScale(scaleX,scaleY,mixTransform))),mergeMatrix}}]),Matrix}();exports.default=Matrix},317:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveTernary=function resolveTernary(list){var b,z0=list[0][2],z1=list[1][2],z2=list[2][2],x0=list[0][0],x1=list[1][0],x2=list[2][0],y0=list[0][1],y1=list[1][1],y2=list[2][1],a=((z0-z1)*(y1-y2)-(z1-z2)*(y0-y1))/((x0-x1)*(y1-y2)-(x1-x2)*(y0-y1));b=y0!==y1?(z0-z1-(x0-x1)*a)/(y0-y1):(z1-z2-(x1-x2)*a)/(y1-y2);return[a,b,z0-a*x0-b*y0]},exports.Line=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(104));var Line=function Line(a,b){var _this=this,_x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,_classCallCheck2.default)(this,Line),this.a=void 0,this.b=void 0,this.x=void 0,this.y=void 0,this.translate=function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _this.isVertical()?new Line(_this.a,_this.b,_this.x+x,_this.y):_this.isHorizontal()?new Line(_this.a,_this.b,_this.x,_this.y+y):new Line(_this.a,_this.b+y-_this.a*x,_this.x,_this.y)},this.isVertical=function(){return null!==_this.x},this.isHorizontal=function(){return null!==_this.y},this.crossPoint=function(line){if(_this.isVertical())return{x:_this.x,y:line.isHorizontal()?line.y:line.a*_this.x+line.b};if(_this.isHorizontal())return{x:line.isVertical()?line.x:(_this.y-line.b)/line.a,y:_this.y};var crossX=(line.b-_this.b)/(_this.a-line.a);return{x:crossX,y:_this.a*crossX+_this.b}},this.toUnits=function(){return[_this.a,_this.b,_this.x,_this.y]},this.toString=function(){return _this.isVertical()?"x = ".concat(_this.x,";"):_this.isHorizontal()?"y = ".concat(_this.y,";"):"y = ".concat(_this.a,"x + ").concat(_this.b)},this.a=a,this.b=b,this.x=_x,this.y=_y};exports.Line=Line,Line.fromPoints=function(p0,p1){if(Math.abs(p0.x-p1.x)<=1e-12)return new Line(null,null,p0.x,null);if(Math.abs(p0.y-p1.y)<=1e-12)return new Line(null,null,null,p0.y);var a=(p0.y-p1.y)/(p0.x-p1.x),b=p0.y-a*p0.x;return new Line(a,b)}},330:function(module,exports){module.exports='import \'../assets/index.less\';\nimport React from \'react\';\n// import plantTXT from \'./svg/Plant\';\nimport Malfurion from \'../src\';\nimport useElementSelection from \'./hooks/useElementSelection\';\nimport Selection from \'./components/Selection\';\n\n// const svgText = plantTXT;\n// const svgText = `\n// <svg>\n//   <g transform="translate(150, 100)">\n//     <g transform="rotate(45 0 0)">\n//       <rect x="0" y="0" width="100" height="100" fill="green" />\n//       <circle cx="50" cy="50" r="10" fill="yellow" />\n//     </g>\n//   </g>\n\n//   <circle cx="50" cy="50" r="20" fill="red" />\n// </svg>\n// `;\nconst svgText = `\n<svg>\n  <circle cx="80" cy="80" r="20" fill="yellow" />\n  <g id="ÂàÜÁªÑ" transform="translate(150 100) scale(1.5)">\n    <rect id="ÊñπÂùó1" x="0" y="0" width="40" height="100" fill="green" />\n    <rect x="0" y="80" width="50" height="20" fill="yellow" opacity="0.5" />\n  </g>\n</svg>\n`;\n\nconst SC =\n  \'[{"path":[0],"rotate":30},{"path":[0,1],"rotate":27.72411817330965},{"path":[0,1,0],"rotate":315.9457209584655,"scaleX":2.9937769231279017,"scaleY":0.5168243503792648,"translateX":62.38341114458523,"translateY":-48.54876214439338}]\';\n\nconst plant = new Malfurion(svgText);\nplant.debug = true;\n\nconsole.warn(\'>>>\', plant.getBox([0]));\n\nexport default function App() {\n  const svgRef = React.useRef<SVGSVGElement>(null);\n  const [record, setRecord] = React.useState(SC);\n\n  const selection = useElementSelection();\n  const hover = useElementSelection(selection.proxyRef);\n\n  React.useEffect(() => {\n    plant.addEventListener(\'click\', ({ target }, instance) => {\n      selection.updateSelection(instance, target);\n    });\n    // plant.addEventListener(\'elementEnter\', ({ target }, instance) => {\n    //   hover.updateSelection(instance, target);\n    // });\n    // plant.addEventListener(\'elementLeave\', (_, instance) => {\n    //   hover.updateSelection(instance, null);\n    // });\n\n    svgRef.current!.appendChild(plant.getSVG());\n  }, []);\n\n  return (\n    <div>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.originX(path, Math.random());\n            instance.originY(path, Math.random());\n          });\n        }}\n      >\n        Random Origin\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.rotate(path, origin => origin - 30);\n          });\n        }}\n      >\n        RotateUp\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.rotate(path, origin => origin + 30);\n          });\n        }}\n      >\n        RotateDown\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.scaleX(path, origin => origin + 0.1);\n          });\n        }}\n      >\n        LargerX\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.scaleY(path, origin => origin + 0.1);\n          });\n        }}\n      >\n        LargerY\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.translateX(path, origin => origin + 10);\n          });\n        }}\n      >\n        TranslateX\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          selection.transformCurrentPath((instance, path) => {\n            instance.opacity(path, origin => (origin + 0.1) % 1);\n          });\n        }}\n      >\n        Opacity\n      </button>\n\n      <button\n        type="button"\n        onClick={() => {\n          const transform = plant.serializeTransform();\n          console.log(transform);\n          setRecord(JSON.stringify(transform));\n        }}\n      >\n        Serialize\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          plant.deserializeTransform(JSON.parse(record));\n        }}\n      >\n        Deserialize\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          plant.reset();\n        }}\n      >\n        Reset\n      </button>\n      <button\n        type="button"\n        onClick={() => {\n          console.log(\'Hierarchy:\', plant.getHierarchy());\n        }}\n      >\n        Hierarchy\n      </button>\n\n      <br />\n\n      <svg\n        width={500}\n        height={500}\n        viewBox="0 0 500 500"\n        style={{\n          width: 500,\n          height: 500,\n          display: \'inline-block\',\n          background: \'rgba(255, 0, 0, 0.1)\',\n        }}\n      >\n        <g ref={svgRef} dangerouslySetInnerHTML={{ __html: \'\' }} />\n\n        <rect\n          stroke="rgba(100, 100, 100, 0.5)"\n          fill="rgba(255, 255, 255, 0.1)"\n          style={{ pointerEvents: \'none\' }}\n          {...hover.boundingBox}\n        />\n\n        <Selection selection={selection} />\n      </svg>\n\n      <textarea\n        value={record}\n        style={{ width: 500, height: 300, verticalAlign: \'top\' }}\n        onChange={e => {\n          setRecord(e.target.value);\n        }}\n      />\n    </div>\n  );\n}\n'},331:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function App(){var svgRef=_react.default.useRef(null),_React$useState=_react.default.useState('[{"path":[0],"rotate":30},{"path":[0,1],"rotate":27.72411817330965},{"path":[0,1,0],"rotate":315.9457209584655,"scaleX":2.9937769231279017,"scaleY":0.5168243503792648,"translateX":62.38341114458523,"translateY":-48.54876214439338}]'),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),record=_React$useState2[0],setRecord=_React$useState2[1],selection=(0,_useElementSelection.default)(),hover=(0,_useElementSelection.default)(selection.proxyRef);return _react.default.useEffect((function(){plant.addEventListener("click",(function(_ref,instance){var target=_ref.target;selection.updateSelection(instance,target)})),svgRef.current.appendChild(plant.getSVG())}),[]),_react.default.createElement("div",null,_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.originX(path,Math.random()),instance.originY(path,Math.random())}))}},"Random Origin"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.rotate(path,(function(origin){return origin-30}))}))}},"RotateUp"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.rotate(path,(function(origin){return origin+30}))}))}},"RotateDown"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.scaleX(path,(function(origin){return origin+.1}))}))}},"LargerX"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.scaleY(path,(function(origin){return origin+.1}))}))}},"LargerY"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.translateX(path,(function(origin){return origin+10}))}))}},"TranslateX"),_react.default.createElement("button",{type:"button",onClick:function onClick(){selection.transformCurrentPath((function(instance,path){instance.opacity(path,(function(origin){return(origin+.1)%1}))}))}},"Opacity"),_react.default.createElement("button",{type:"button",onClick:function onClick(){var transform=plant.serializeTransform();console.log(transform),setRecord(JSON.stringify(transform))}},"Serialize"),_react.default.createElement("button",{type:"button",onClick:function onClick(){plant.deserializeTransform(JSON.parse(record))}},"Deserialize"),_react.default.createElement("button",{type:"button",onClick:function onClick(){plant.reset()}},"Reset"),_react.default.createElement("button",{type:"button",onClick:function onClick(){console.log("Hierarchy:",plant.getHierarchy())}},"Hierarchy"),_react.default.createElement("br",null),_react.default.createElement("svg",{width:500,height:500,viewBox:"0 0 500 500",style:{width:500,height:500,display:"inline-block",background:"rgba(255, 0, 0, 0.1)"}},_react.default.createElement("g",{ref:svgRef,dangerouslySetInnerHTML:{__html:""}}),_react.default.createElement("rect",(0,_extends2.default)({stroke:"rgba(100, 100, 100, 0.5)",fill:"rgba(255, 255, 255, 0.1)",style:{pointerEvents:"none"}},hover.boundingBox)),_react.default.createElement(_Selection.default,{selection:selection})),_react.default.createElement("textarea",{value:record,style:{width:500,height:300,verticalAlign:"top"},onChange:function onChange(e){setRecord(e.target.value)}}))};var _extends2=_interopRequireDefault(__webpack_require__(311)),_slicedToArray2=_interopRequireDefault(__webpack_require__(103));__webpack_require__(778);var _react=_interopRequireDefault(__webpack_require__(2)),_src=_interopRequireDefault(__webpack_require__(312)),_useElementSelection=_interopRequireDefault(__webpack_require__(790)),_Selection=_interopRequireDefault(__webpack_require__(791)),plant=new _src.default('\n<svg>\n  <circle cx="80" cy="80" r="20" fill="yellow" />\n  <g id="ÂàÜÁªÑ" transform="translate(150 100) scale(1.5)">\n    <rect id="ÊñπÂùó1" x="0" y="0" width="40" height="100" fill="green" />\n    <rect x="0" y="80" width="50" height="20" fill="yellow" opacity="0.5" />\n  </g>\n</svg>\n');plant.debug=!0,console.warn(">>>",plant.getBox([0]))},339:function(module,exports,__webpack_require__){__webpack_require__(340),__webpack_require__(486),module.exports=__webpack_require__(487)},404:function(module,exports){},487:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72),_storybook_addon_notes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(325),storybook_addon_source__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(674),__webpack_require__(326)),storybook_addon_source__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(storybook_addon_source__WEBPACK_IMPORTED_MODULE_3__);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_storybook_addon_notes__WEBPACK_IMPORTED_MODULE_1__.withNotes),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(storybook_addon_source__WEBPACK_IMPORTED_MODULE_3___default.a),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){__webpack_require__(676)}),module)}.call(this,__webpack_require__(247)(module))},676:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_markdown__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(327),react_markdown__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_markdown__WEBPACK_IMPORTED_MODULE_1__),_storybook_addon_a11y__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(328),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(72),_storybook_addon_console__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(329),rc_source_loader_examples_basic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(330),rc_source_loader_examples_basic__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(rc_source_loader_examples_basic__WEBPACK_IMPORTED_MODULE_5__),_examples_basic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(331),_examples_basic__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_examples_basic__WEBPACK_IMPORTED_MODULE_6__),_storybook_theming__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(335),_README_md__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(202);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.addParameters)({options:{theme:_storybook_theming__WEBPACK_IMPORTED_MODULE_7__.themes.light,name:"malfurion",url:"https://zombiej.github.io/malfurion",title:"malfurion"}});var _ref=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_markdown__WEBPACK_IMPORTED_MODULE_1___default.a,{escapeHtml:!1,source:_README_md__WEBPACK_IMPORTED_MODULE_8__.a}),_ref2=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_examples_basic__WEBPACK_IMPORTED_MODULE_6___default.a,null);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("malfurion",module).addDecorator(_storybook_addon_a11y__WEBPACK_IMPORTED_MODULE_2__.withA11y).addDecorator((function(storyFn,context){return Object(_storybook_addon_console__WEBPACK_IMPORTED_MODULE_4__.withConsole)()(storyFn)(context)})).add("README",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"markdown-body entry-content",style:{padding:24}},_ref)}),{source:{code:_README_md__WEBPACK_IMPORTED_MODULE_8__.a}}).add("basic",(function(){return _ref2}),{source:{code:rc_source_loader_examples_basic__WEBPACK_IMPORTED_MODULE_5___default.a}})}.call(this,__webpack_require__(247)(module))},778:function(module,exports,__webpack_require__){var api=__webpack_require__(779),content=__webpack_require__(780);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1},exported=(api(content,options),content.locals?content.locals:{});module.exports=exported},780:function(module,exports,__webpack_require__){(exports=__webpack_require__(781)(!1)).push([module.i,".rc-footer {\n  position: relative;\n  clear: both;\n  color: rgba(255, 255, 255, 0.4);\n  font-size: 14px;\n  line-height: 1.5;\n  background-color: #000;\n}\n.rc-footer a {\n  transition: all 0.3s;\n  color: rgba(255, 255, 255, 0.9);\n  text-decoration: none;\n}\n.rc-footer a:hover {\n  color: #40a9ff;\n}\n.rc-footer-container {\n  width: 100%;\n  max-width: 1200px;\n  padding: 80px 0 20px;\n  margin: auto;\n}\n.rc-footer-columns {\n  display: flex;\n  justify-content: space-around;\n}\n.rc-footer-column {\n  margin-bottom: 60px;\n}\n.rc-footer-column h2 {\n  position: relative;\n  margin: 0 auto 24px;\n  font-weight: 500;\n  font-size: 16px;\n  color: #fff;\n}\n.rc-footer-column-icon {\n  margin-right: 0.5em;\n  width: 22px;\n  display: inline-block;\n  vertical-align: middle;\n  top: -1px;\n  position: relative;\n  text-align: center;\n}\n.rc-footer-column-icon > span,\n.rc-footer-column-icon > svg,\n.rc-footer-column-icon img {\n  width: 100%;\n  display: block;\n}\n.rc-footer-item {\n  margin: 12px 0;\n}\n.rc-footer-item-icon {\n  margin-right: 0.4em;\n  width: 16px;\n  display: inline-block;\n  vertical-align: middle;\n  top: -1px;\n  position: relative;\n  text-align: center;\n}\n.rc-footer-item-icon > span,\n.rc-footer-item-icon > svg,\n.rc-footer-item-icon img {\n  width: 100%;\n  display: block;\n}\n.rc-footer-item-separator {\n  margin: 0 0.3em;\n}\n.rc-footer-bottom-container {\n  border-top: 1px solid rgba(255, 255, 255, 0.25);\n  width: 100%;\n  max-width: 1200px;\n  text-align: center;\n  margin: 0 auto;\n  padding: 16px 0;\n  line-height: 32px;\n  font-size: 16px;\n}\n.rc-footer-light {\n  background-color: transparent;\n  color: rgba(0, 0, 0, 0.85);\n}\n.rc-footer-light h2,\n.rc-footer-light a {\n  color: rgba(0, 0, 0, 0.85);\n}\n.rc-footer-light .rc-footer-bottom-container {\n  border-top-color: #e8e8e8;\n}\n.rc-footer-light .rc-footer-item-separator,\n.rc-footer-light .rc-footer-item-description {\n  color: rgba(0, 0, 0, 0.45);\n}\n@media only screen and (max-width: 767.99px) {\n  .rc-footer {\n    text-align: center;\n  }\n  .rc-footer-container {\n    padding: 40px 0;\n  }\n  .rc-footer-columns {\n    display: block;\n  }\n  .rc-footer-column {\n    display: block;\n    margin-bottom: 40px;\n  }\n  .rc-footer-column:last-child {\n    margin-bottom: 0;\n  }\n}\n",""]),module.exports=exports},788:function(module,exports,__webpack_require__){},789:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathCache=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(313)),_classCallCheck2=_interopRequireDefault(__webpack_require__(104));function convertStringPath(path){return path.split("-").map((function(pos){return Number(pos)}))}exports.PathCache=function PathCache(){var _this=this;(0,_classCallCheck2.default)(this,PathCache),this.elementPathMap=new Map,this.pathElementMap=new Map,this.entityPathMap=new Map,this.set=function(element,path,entity){var strPath=path.join("-");_this.elementPathMap.set(element,strPath),_this.pathElementMap.set(strPath,element),_this.entityPathMap.set(entity,strPath)},this.getElement=function(path){return _this.pathElementMap.get(path.join("-"))||null},this.getPath=function(e){var path1=_this.elementPathMap.get(e),path2=_this.entityPathMap.get(e),path=path1||path2;return path?convertStringPath(path):null},this.getEntityList=function(){return(0,_toConsumableArray2.default)(_this.entityPathMap.keys())},this.getPathList=function(){return(0,_toConsumableArray2.default)(_this.pathElementMap.keys()).map(convertStringPath)}}},790:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function useElementSelection(){var overwriteProxyRef=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:null},_React$useState=_react.default.useState(null),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),boundingBox=_React$useState2[0],setBoundingBox=_React$useState2[1],_React$useState3=_react.default.useState(null),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),current=_React$useState4[0],setCurrent=_React$useState4[1],_React$useState5=_react.default.useState([]),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),currentPath=_React$useState6[0],setCurrentPath=_React$useState6[1],proxyRef=_react.default.useRef({current:current,currentPath:currentPath});function updateSelection(instance,target){if(proxyRef.current.current!==instance)setCurrent(instance),setCurrentPath([0]);else{for(var _path=instance.getPath(target)||[],commonPath=[],i=0;i<proxyRef.current.currentPath.length;i+=1){var pos=proxyRef.current.currentPath[i];if(pos!==_path[i])break;commonPath.push(pos)}setCurrentPath(_path.slice(0,commonPath.length+1))}}function transformCurrentPath(callback){current&&currentPath&&(callback(current,currentPath),setBoundingBox(current.getBox(currentPath)))}return proxyRef.current=(0,_objectSpread2.default)({current:current,currentPath:currentPath},overwriteProxyRef.current),_react.default.useEffect((function(){current&&setBoundingBox(current.getBox(currentPath))}),[current,currentPath]),{boundingBox:boundingBox,updateSelection:updateSelection,proxyRef:proxyRef,transformCurrentPath:transformCurrentPath}};var _objectSpread2=_interopRequireDefault(__webpack_require__(199)),_slicedToArray2=_interopRequireDefault(__webpack_require__(103)),_react=_interopRequireDefault(__webpack_require__(2))},791:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(__webpack_require__(311)),_slicedToArray2=_interopRequireDefault(__webpack_require__(103)),_classCallCheck2=_interopRequireDefault(__webpack_require__(104)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(792)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(795)),_createClass2=_interopRequireDefault(__webpack_require__(316)),_inherits2=_interopRequireDefault(__webpack_require__(796)),_react=_interopRequireDefault(__webpack_require__(2)),_lodash=__webpack_require__(798),_src=__webpack_require__(312),_OperatePoint=_interopRequireDefault(__webpack_require__(799)),_OriginPoint=__webpack_require__(800),_RotateHandler=_interopRequireDefault(__webpack_require__(801)),_default=function(_React$Component){function Selection(props){var _this;return(0,_classCallCheck2.default)(this,Selection),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Selection).call(this,props))).state={startPoint:null,leftTop:{x:0,y:0},rightTop:{x:0,y:0},leftBottom:{x:0,y:0},rightBottom:{x:0,y:0},origin:{x:0,y:0},transformMatrix:_src.Matrix.fromTranslate(),control:null},_this.rotateRef=_react.default.createRef(),_this.onPointMouseDown=function(_ref2,position){var clientX=_ref2.clientX,clientY=_ref2.clientY;_this.setState({control:position,startPoint:{x:clientX,y:clientY}})},_this.onRotateMouseDown=function(){if(_this.rotateRef.current){var _this$rotateRef$curre=_this.rotateRef.current.getBoundingClientRect(),x=_this$rotateRef$curre.x,y=_this$rotateRef$curre.y;_this.setState({control:"rotate",startPoint:{x:x,y:y}})}},_this.onMouseMove=function(_ref3){var clientX=_ref3.clientX,clientY=_ref3.clientY,_this$state=_this.state,startPoint=_this$state.startPoint,leftTop=_this$state.leftTop,rightTop=_this$state.rightTop,rightBottom=_this$state.rightBottom,control=_this$state.control,selection=_this.props.selection;if(startPoint&&selection.boundingBox){var offsetX=clientX-startPoint.x,offsetY=clientY-startPoint.y,_selection$boundingBo2=selection.boundingBox,x=_selection$boundingBo2.x,y=_selection$boundingBo2.y,width=_selection$boundingBo2.width,height=_selection$boundingBo2.height;if("rotate"===control){var w=clientX-startPoint.x,h=startPoint.y-clientY,newRotate=0;clientX===startPoint.x?newRotate=clientY<startPoint.y?0:180:(newRotate=((newRotate=Math.atan(w/h)/Math.PI*180)+180)%180,newRotate=clientX>startPoint.x?newRotate:newRotate+180),selection.transformCurrentPath((function(instance,path){instance.rotate(path,newRotate)}))}else{var positionList=[],topLine=_src.Line.fromPoints(leftTop,rightTop),rightLine=_src.Line.fromPoints(rightTop,rightBottom);switch(control){case"rb":positionList.push({source:{x:x,y:y},target:leftTop});var newRightLine=rightLine.translate(offsetX,offsetY),crossPoint=topLine.crossPoint(newRightLine);positionList.push({source:{x:x+width,y:y},target:{x:crossPoint.x,y:crossPoint.y}}),positionList.push({source:{x:x+width,y:y+height},target:{x:rightBottom.x+offsetX,y:rightBottom.y+offsetY}})}var transformMatrix=_src.Matrix.backFromPosition(positionList);_this.updateTransform(transformMatrix),_this.setState({startPoint:{x:clientX,y:clientY}})}}},_this.onMouseUp=function(){_this.setState({startPoint:null,control:null})},_this.updateTransform=function(transformMatrix){var selection=_this.props.selection,startPoint=_this.state.startPoint;if(selection.boundingBox&&startPoint){var _selection$boundingBo3=selection.boundingBox,pureMergedTransform=_selection$boundingBo3.pureMergedTransform,x=_selection$boundingBo3.x,y=_selection$boundingBo3.y,width=_selection$boundingBo3.width,height=_selection$boundingBo3.height,originX=_selection$boundingBo3.originX,originY=_selection$boundingBo3.originY,rotate=_selection$boundingBo3.rotate,source=_src.Matrix.fromTransformText(pureMergedTransform),mixTransformMatrix=transformMatrix.leftDivide(source),shapeInfo={x:x,y:y,width:width,height:height,originX:originX,originY:originY},_mixTransformMatrix$t=mixTransformMatrix.toTransform(),_mixTransformMatrix$t2=(0,_slicedToArray2.default)(_mixTransformMatrix$t,4),a=_mixTransformMatrix$t2[0],b=_mixTransformMatrix$t2[1],c=_mixTransformMatrix$t2[2],d=_mixTransformMatrix$t2[3],scaleX=0,scaleY=0;if(90===rotate)scaleX=b,scaleY=-c;else if(270===rotate)scaleX=-b,scaleY=c;else{var cosA=Math.cos(rotate/180*Math.PI);scaleX=a/cosA,scaleY=d/cosA}var scaleMatrix=_src.Matrix.fromScale(scaleX,scaleY,shapeInfo),rotateMatrix=_src.Matrix.fromRotate(rotate,shapeInfo),_translateMatrix$toTr=mixTransformMatrix.rightDivide(scaleMatrix).rightDivide(rotateMatrix).toTransform(),_translateMatrix$toTr2=(0,_slicedToArray2.default)(_translateMatrix$toTr,6),translateX=_translateMatrix$toTr2[4],translateY=_translateMatrix$toTr2[5];selection.transformCurrentPath((function(instance,path){instance.scaleX(path,scaleX),instance.scaleY(path,scaleY),instance.translateX(path,translateX),instance.translateY(path,translateY)}))}},_this.onMouseMove=(0,_lodash.throttle)(_this.onMouseMove,100),_this}return(0,_inherits2.default)(Selection,_React$Component),(0,_createClass2.default)(Selection,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var selection=_ref.selection,newState={};if(selection.boundingBox){var _selection$boundingBo=selection.boundingBox,x=_selection$boundingBo.x,y=_selection$boundingBo.y,width=_selection$boundingBo.width,height=_selection$boundingBo.height,originX=_selection$boundingBo.originX,originY=_selection$boundingBo.originY,transformMatrix=_src.Matrix.fromTransformText(selection.boundingBox.mergedTransform);newState.origin=transformMatrix.transformPosition(x+width*originX,y+height*originY),newState.leftTop=transformMatrix.transformPosition(x,y),newState.rightTop=transformMatrix.transformPosition(x+width,y),newState.leftBottom=transformMatrix.transformPosition(x,y+height),newState.rightBottom=transformMatrix.transformPosition(x+width,y+height)}return newState}}]),(0,_createClass2.default)(Selection,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function render(){var _this$state2=this.state,origin=_this$state2.origin,leftTop=_this$state2.leftTop,rightTop=_this$state2.rightTop,leftBottom=_this$state2.leftBottom,rightBottom=_this$state2.rightBottom,_this$props=this.props,selection=_this$props.selection,_this$props$originSiz=_this$props.originSize,originSize=void 0===_this$props$originSiz?10:_this$props$originSiz,_this$props$pointSize=_this$props.pointSize,pointSize=void 0===_this$props$pointSize?6:_this$props$pointSize,_this$props$handlerSi=_this$props.handlerSize,handlerSize=void 0===_this$props$handlerSi?100:_this$props$handlerSi,_this$props$stroke=_this$props.stroke,stroke=void 0===_this$props$stroke?"#000":_this$props$stroke;if(!selection.boundingBox)return null;var boxProps={x:selection.boundingBox.x,y:selection.boundingBox.y,width:selection.boundingBox.width,height:selection.boundingBox.height,transform:selection.boundingBox.mergedTransform},pointProps={size:pointSize,stroke:stroke,fill:"transparent",onMouseDown:this.onPointMouseDown};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("rect",(0,_extends2.default)({stroke:stroke,strokeWidth:1,fill:"transparent",style:{pointerEvents:"none"},vectorEffect:"non-scaling-stroke"},boxProps)),_react.default.createElement(_OriginPoint.OriginPoint,{size:originSize,point:origin,stroke:stroke}),_react.default.createElement(_RotateHandler.default,{origin:origin,size:pointSize,length:handlerSize,stroke:stroke,rotate:selection.boundingBox.rotate||0,onMouseDown:this.onRotateMouseDown,ref:this.rotateRef}),_react.default.createElement(_OperatePoint.default,(0,_extends2.default)({},pointProps,{position:"lt",point:leftTop})),_react.default.createElement(_OperatePoint.default,(0,_extends2.default)({},pointProps,{position:"rt",point:rightTop})),_react.default.createElement(_OperatePoint.default,(0,_extends2.default)({},pointProps,{position:"lb",point:leftBottom})),_react.default.createElement(_OperatePoint.default,(0,_extends2.default)({},pointProps,{position:"rb",point:rightBottom})))}}]),Selection}(_react.default.Component);exports.default=_default},799:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(2));exports.default=function _default(_ref){var point=_ref.point,size=_ref.size,stroke=_ref.stroke,position=_ref.position,_onMouseDown=_ref.onMouseDown;return _react.default.createElement("circle",{style:{cursor:"pointer"},fill:"transparent",vectorEffect:"non-scaling-stroke",cx:point.x,cy:point.y,r:size/2,stroke:stroke,onMouseDown:function onMouseDown(e){_onMouseDown(e,position)}})}},800:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.OriginPoint=function OriginPoint(_ref){var point=_ref.point,size=_ref.size,stroke=_ref.stroke,half=size/2;return _react.default.createElement("g",null,_react.default.createElement("line",{x1:point.x-half,x2:point.x+half,y1:point.y,y2:point.y,stroke:stroke,strokeWidth:1,vectorEffect:"non-scaling-stroke"}),_react.default.createElement("line",{x1:point.x,x2:point.x,y1:point.y-half,y2:point.y+half,stroke:stroke,strokeWidth:1,vectorEffect:"non-scaling-stroke"}))};var _react=_interopRequireDefault(__webpack_require__(2))},801:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(36);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(2));var _default=_react.default.forwardRef((function RotateHandler(_ref,ref){var origin=_ref.origin,length=_ref.length,stroke=_ref.stroke,size=_ref.size,rotate=_ref.rotate,onMouseDown=_ref.onMouseDown,centerRef=_react.default.useRef(null);return _react.default.useImperativeHandle(ref,(function(){return centerRef.current})),_react.default.createElement("g",{transform:"rotate(".concat(rotate," ").concat(origin.x," ").concat(origin.y,")")},_react.default.createElement("line",{x1:origin.x,y1:origin.y,x2:origin.x,y2:origin.y-length,stroke:stroke,style:{pointerEvents:"none"}}),_react.default.createElement("circle",{cx:origin.x,cy:origin.y-length-size/2,r:size/2,fill:"transparent",stroke:stroke,style:{cursor:"pointer"},onMouseDown:onMouseDown}),_react.default.createElement("rect",{x:origin.x,y:origin.y,width:1,height:1,fill:"red",ref:centerRef}))}));exports.default=_default}},[[339,1,2]]]);
//# sourceMappingURL=main.449214e3e1bbfd57daed.bundle.js.map